{% extends 'base.html' %}

{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØµÙ…Ù…{% endblock %}

{% block content %}
<div class="wrapper">

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
    <aside class="sidebar">
        <div class="logo">Designer Panel</div>
        <ul>
            <li><a href="{{ url_for('dashboard_designer') }}">ğŸ  Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
            <li><a href="{{ url_for('profile_designer') }}">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a></li>
            <li><a href="{{ url_for('add_design') }}">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ Ø¬Ø¯ÙŠØ¯</a></li>
            <li><a href="{{ url_for('designer_requests') }}">ğŸ“© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a></li>
            <li><a href="{{ url_for('logout') }}">ğŸ”“ ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a></li>
        </ul>
    </aside>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main class="main-content">
        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ØµÙ…Ù… -->
        <section class="stats">
            <div class="card">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©</h3>
                <p>{{ requests|selectattr('status','equalto','Ù…ÙØªÙˆØ­')|list|length }}</p>
            </div>
            <div class="card">
                <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</h3>
                <p>{{ requests|selectattr('status','equalto','Ù…ÙƒØªÙ…Ù„')|list|length }}</p>
            </div>
            <div class="card">
                <h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</h3>
                <p>{{ portfolio|length }}</p>
            </div>
        </section>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ -->
        <section class="portfolio-section">
            <h2>Ø£Ø¹Ù…Ø§Ù„ÙŠ</h2>
            <div class="portfolio-grid">
                {% for work in portfolio %}
                <div class="portfolio-card">
                    <a href="{{ url_for('static', filename=work['image_path'].split('static/')[-1]) }}" target="_blank">
                        <img src="{{ url_for('static', filename=work['image_path'].split('static/')[-1]) }}" alt="{{ work['title'] }}">
                    </a>
                    <h3>{{ work['title'] }}</h3>
                    <p>{{ work['description'] }}</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <section class="requests-section">
            <h2>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2>
            {% for req in requests %}
            <div class="request-card">
                <div class="request-info">
                    <h4>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: {{ req['client_id'] }}</h4>
                    <p>{{ req['description'] }}</p>
                    <span>Ø§Ù„Ø­Ø§Ù„Ø©: {{ req['status'] }}</span>
                </div>
                <div class="request-actions">
                    <a href="{{ url_for('open_chat', request_id=req['id']) }}"><button>ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button></a>
                    {% if req['status'] != 'Ù…ÙƒØªÙ…Ù„' %}
                    <form action="{{ url_for('submit_design', request_id=req['id']) }}" method="POST">
                        <button type="submit">ØªØ³Ù„ÙŠÙ… Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
                    </form>
                    {% else %}
                    <button disabled>ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </section>
    </main>

</div>
{% endblock %}